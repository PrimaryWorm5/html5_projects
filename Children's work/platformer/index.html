<!DOCTYPE html>
<html>
<head>

</head>
<body>
<canvas id="canvas"></canvas>
<script type="text/javascript">
document.body.style.zoom = "100%"
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');
	canvas.height = window.innerHeight-20;
	canvas.width = window.innerWidth-20;



function ani_lava(){
	requestAnimationFrame(ani_lava)
var sqx = 401+Math.random()*194;
		sqy = 550+Math.random()*50;
		sq = Math.random()*5;
  	ctx.clearRect(401,550,198,50);
	ctx.beginPath();
	ctx.fillStyle = "red";
	ctx.fillRect(400,600,200,40);
	ctx.fillRect(sqx,sqy,sq,sq);
var sqx1 = 801+Math.random()*194;
		sqy1 = 550+Math.random()*50;
		sq = Math.random()*5;
    ctx.clearRect(801,550,198,50);
	ctx.beginPath();
	ctx.fillRect(800,600,200,40);
	ctx.fillRect(sqx1,sqy1,sq,sq);
}

 

var jump = 0;

var x = 150;
	y = 400;
	hh = 0;
	hv = 0;
	g = 0.4;
	plc = "gray";

var d1y = 200;
	d2y = 200;
	d3y = 200;
	d1k = 0;
	d2k = 0;
	d3k = 0;


hero()
function hero() {
ctx.clearRect(0,0,innerWidth,innerHeight);
requestAnimationFrame(hero)
ctx.beginPath();
ctx.fillStyle = plc;
ctx.fillRect(x,y,28,28);
hh = hh/1.08;
hv=hv+g-0.1;
x = x+hh;
y = y+hv;
ani_lava()
platform1()
platform2()
platform3()
door1()
door2()
door3()
exit()
level()
if (x>100 && x<400 && y >=470 ||
	x>600 && x<800 && y >=370 ||
	x>1000&&x<1400 && y >=470 ||
	x>0   && x<100 && y > 270
	){
hv=-g;
plc = "gray"
jump = 0;
d2k = 0;
d3k  = 0;
}
if (d2k == 1 && d3k ==1) {
	plc="purple";
	ey  = ey - 1;
}
if(x>innerWidth) {
	window.location.href = "http://google.com";
}
if (x<100 && y>270||
	x<400 && y>500||
	x>=572 && x<=800 &&y>372 ||
	x>=972 && x < 1400 && y>472

	){
jump = 0;
	hh = -hh;
}
// Platform 1 
	// ctx.fillRect(150,350,100,20);
if(x>=125 && x<=250 && y<=350+28&& y>=350-28) {
	hv = -g;
jump = 0;
	plc= "green"
	d1k=1;
}
if(x>=1050-30 && d1k<1) {
	hh = - hh;
}
// Platform 2
if (x>=430 && x<=550 && y<=320 && y>=320-48) {
	hv = -g;
jump = 0;
	plc= "red"
	d2k=1;
}
if(x>=1150-30 && d2k<1) {
	hh = - hh;}
// Platform 3
if (x>=850 && x<=950 && y<=520+28 && y>=520-28) {
	hv = -g;
jump = 0;
	plc= "blue"
	d3k=1;
}

if(x>=1250-30 && d3k<1) {
	hh = - hh;}
if (y > 590 && y < 600) {
	go()
}
}
var ra = 0;
function go() {
if(ra<1){ 
	alert('Game over');
	ra++;
}
document.location.reload(true);
}
function level() {
   		ctx.font = "18px Verdana";
        ctx.fillText("Жми стрелки что бы перемещаться",120,400);
        ctx.fillText("открой двери с помощью их цветов",420,280);
	ctx.fillStyle = 'green';
	ctx.beginPath();
	ctx.fillRect(0,300,100,200);
	ctx.fillRect(0,500,400,200);
	ctx.fillRect(600,400,200,400);
	ctx.fillRect(1000,500,400,400);
}
function platform1() {
	ctx.fillStyle = 'green';
	ctx.beginPath();
	ctx.fillRect(150,350,100,20);
	
}
function platform2() {
	ctx.fillStyle = 'red';
	ctx.beginPath();
	ctx.fillRect(450,300,100,20);
}
function platform3 () {
	ctx.fillStyle = 'blue';
	ctx.beginPath();
	ctx.fillRect(850,520,100,20);
}
var ey = 200;
function exit () {
	ctx.fillStyle = 'purple';
	ctx.beginPath();
	ctx.fillRect(1320,ey,30,300);
}

document.onkeydown = checkKey;

function checkKey(e) {
    e = e || window.event;
    if (e.keyCode == '38') {
        // up arrow
        if(jump<1) {
        hv = -10;jump++;}
    }
    else if (e.keyCode == '40') {
        // down arrow

    }
    else if (e.keyCode == '37') {
       // left arrow
        hh = -8;
    }
    else if (e.keyCode == '39') {
       // right arrow
    	hh = 8;
    }
    else if (e.keyCode == '32') {
    }}
function door1 () {
	requestAnimationFrame(door1)
ctx.beginPath()
ctx.fillStyle = "green";
ctx.fillRect(1050,d1y,50,300);
if(d1k==1) {
d1y=d1y-0.01;
}
}
function door2 () {
	requestAnimationFrame(door2)
	ctx.beginPath()
	ctx.fillStyle = "red";
	ctx.fillRect(1150,d2y,50,300);
	if(d2k==1) {
d2y=d2y-0.01;
}
}

function door3 () {
	requestAnimationFrame(door3)
	ctx.beginPath()
	ctx.fillStyle = "blue";
	ctx.fillRect(1250,d3y,50,300);
if(d3k==1) {
d3y=d3y-0.01;
}
}
</script>
</body>
</html>